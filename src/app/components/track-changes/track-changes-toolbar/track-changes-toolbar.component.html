<!-- Track Changes Toolbar -->
<div class="track-changes-buttons">
  <!-- Separator -->
  <mat-divider vertical style="height: 40px;"></mat-divider>

  <!-- Track Changes Toggle -->
  <button
    [matTooltip]="getToggleTrackingTooltip()"
    mat-icon-button
    [class.active]="state.isEnabled"
    (click)="onToggleTracking()"
    type="button">
    <mat-icon [style.color]="state.isEnabled ? '#4caf50' : ''">
      {{ state.isEnabled ? 'track_changes' : 'edit_off' }}
    </mat-icon>
  </button>

  <!-- Show/Hide Toggle (only enabled when tracking is on) -->
  <button
    [matTooltip]="getToggleShowTooltip()"
    mat-icon-button
    [class.active]="state.isVisible"
    [disabled]="!state.isEnabled"
    (click)="onToggleShow()"
    type="button">
    <mat-icon>{{ state.isVisible ? 'visibility' : 'visibility_off' }}</mat-icon>
  </button>

  <mat-divider vertical style="height: 40px;" *ngIf="state.pendingCount > 0"></mat-divider>

  <!-- Accept All -->
  <button
    [matTooltip]="getAcceptAllTooltip()"
    mat-icon-button
    [disabled]="state.pendingCount === 0"
    (click)="onAcceptAll()"
    type="button">
    <mat-icon [style.color]="state.pendingCount > 0 ? '#4caf50' : ''">done_all</mat-icon>
  </button>

  <!-- Reject All -->
  <button
    [matTooltip]="getRejectAllTooltip()"
    mat-icon-button
    [disabled]="state.pendingCount === 0"
    (click)="onRejectAll()"
    type="button">
    <mat-icon [style.color]="state.pendingCount > 0 ? '#f44336' : ''">clear_all</mat-icon>
  </button>

  <!-- Accept One (at cursor/selection) -->
  <button
    [matTooltip]="getAcceptOneTooltip()"
    mat-icon-button
    [disabled]="state.pendingCount === 0"
    (click)="onAcceptOne()"
    type="button">
    <mat-icon [style.color]="state.pendingCount > 0 ? '#4caf50' : ''">check_circle_outline</mat-icon>
  </button>

  <!-- Reject One (at cursor/selection) -->
  <button
    [matTooltip]="getRejectOneTooltip()"
    mat-icon-button
    [disabled]="state.pendingCount === 0"
    (click)="onRejectOne()"
    type="button">
    <mat-icon [style.color]="state.pendingCount > 0 ? '#f44336' : ''">highlight_off</mat-icon>
  </button>

  <!-- Pending Count Badge -->
  <div class="pending-badge" *ngIf="state.pendingCount > 0">
    <span class="badge-text">{{ state.pendingCount }}</span>
  </div>
</div>